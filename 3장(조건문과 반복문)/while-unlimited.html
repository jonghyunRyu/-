<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>난수를 발생시켜 맞추는 게임(수정)</title>
</head>
<body>
    <script>
        var low = 0; // 범위의 최소값
        var high = 0; // 범위의 최고값
        var card = 0; // 정답
        // 게임의 정답을 맞추기 위해서 무한루프를 돌고 있다.
        while(true) {
            var count = 0; // 사용자의 시도 횟수
            low = 0;
            high = 100;
            card = Math.floor(Math.random() * 100); //0~99까지의 난수를 발생
            alert("수를 결정하였습니다. 맞춰 보세요.");
            // 반복문 시작
            while(true) {
                var n = 0;
                alert(low + "이상" + " - " + high + "미만"); // 값의 범위를 출력
                count++; 
                alert("시도횟수 : " + count + "번째"); // 시도 횟수 알림
                
                n = prompt("정수를 입력하세요!\n정수를 입력하지 않으면 시도횟수가 증가합니다."); //사용자로부터 숫자를 입력받음
                n = parseFloat(n); // 실수형으로 변환
                if (n > high || n < low) { // 범위를 벗어난 경우
                    alert("값의 범위를 벗어났어요.");
                } 
                else if (n <= high && n >= low) { // 정상적인 범위의 수가 입력된 경우
                    if (n == card) { // 정답을 맞출 경우에만 반복문 탈출
                        alert("정답입니다. 짝짝짝!");
                        break;
                    } 
                    else if (n > card && Number.isInteger(n) == true) { // 입력받은 수가 정답보다 크고 정수로 입력했을 때
                        alert("정답은 더 낮은 수 입니다.");
                        n = parseInt(n); // 실수를 정수로 변환
                        high = n; // 범위를 재지정을 하기 위해서 값을 대입
                    }
                    else if (n < card && Number.isInteger(n) == true) { // 입력받은 수가 정답보다 작고 정수로 입력했을 때
                        alert("정답은 더 높은 수 입니다.");
                        n = parseInt(n); // 실수를 정수로 변환
                        low = n + 1; // 범위를 재지정을 하기 위해서 값을 대입 (low는 이상으로 알리기 때문에 1 더해서 저장)
                    }
                    else if (Number.isInteger(n) == false) { // 입력 받은 값이 실수형일 때
                        alert("정수로 입력해주세요.");
                    }
                }
                // 범위 밖의 값이 입력됐을 때 ex)스트링 타입
                else{
                    alert("숫자를 입력해주세요.");
                    }
            }
            alert(count + "번째에 정답을 맞추셨습니다.");
            // 다시 게임을 할지 물어보고 할 경우 다시 반복 안 할 경우 break
            var con = confirm("다시 게임을 하시겠습니까?");
            if (con == false) {
                break;
            }
        }
    </script>
</body>
</html>